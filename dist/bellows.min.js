/*! bellows 3.0.0 2014-09-16 */
(function(e){if("function"==typeof define&&define.amd)define(["$","velocity","plugin"],e);else{var t=window.Zepto||window.jQuery;e(t,t.Velocity)}})(function(e,t){function i(e,t){i._super.call(this,e,t,i.DEFAULTS)}var s={ITEM:"bellows__item",HEADER:"bellows__header",OPENED:"bellows--is-open",OPENING:"bellows--is-opening",CLOSING:"bellows--is-closing"},n={ITEM_HEADER:"> .bellows__item > .bellows__header",ITEM_CONTENT_WRAPPER:"> .bellows__content-wrapper",ITEM_CONTENT:"> .bellows__item > .bellows__content"};return i.VERSION="3.0.0",i.DEFAULTS={singleItemOpen:!1,event:"click",duration:200,easing:"swing",open:e.noop,opened:e.noop,close:e.noop,closed:e.noop},e.plugin("bellows",i,{_init:function(t){this.$bellows=e(t),this._wrapContent(this.$bellows),this._bindEvents()},_bindEvents:function(){var t=this;this.$bellows.on(this.options.event,function(i){var n=e(i.target),o=n.closest(".bellows");n.is("a")||n.parents("a").length||o[0]===t.$bellows[0]&&(n.hasClass(s.HEADER)||n.closest(".bellows__header").length)&&(i.preventDefault(),t.toggle(n.closest(".bellows__item")))})},_getHeight:function(e){return parseFloat(t.CSS.getPropertyValue(e[0],"height"))},_setHeight:function(e){this.$bellows.css("height",e||"")},_item:function(e){return"number"==typeof e&&(e=this.$bellows.find("."+s.ITEM).eq(e)),e},_wrapContent:function(e){e.find(n.ITEM_CONTENT).wrap('<div class="bellows__content-wrapper" />').parents(".bellows__item:not(.bellows--is-open)").find(n.ITEM_CONTENT_WRAPPER).attr("aria-hidden",!0)},toggle:function(e){e=this._item(e),this[e.hasClass(s.OPENED)?"close":"open"](e)},open:function(e){if(e=this._item(e),!e.hasClass(s.OPENED)){var i=this,o=e.find(n.ITEM_CONTENT_WRAPPER);this.options.singleItemOpen&&this.closeAll(),this._trigger("open",{item:e}),t.animate(o,"slideDown",{begin:function(){i._setHeight(i._getHeight(i.$bellows)+i._getHeight(o)),e.addClass(s.OPENING)},duration:this.options.duration,easing:this.options.easing,complete:function(){e.removeClass(s.OPENING).addClass(s.OPENED).find(n.ITEM_CONTENT_WRAPPER).removeAttr("aria-hidden"),i._setHeight(),i._trigger("opened",{item:e})}})}},close:function(e){if(e=this._item(e),e.hasClass(s.OPENED)){var i=this,o=e.find(n.ITEM_CONTENT_WRAPPER);this._trigger("close",{item:e}),t.animate(o,"slideUp",{begin:function(){i._setHeight(i._getHeight(i.$bellows)),e.removeClass(s.OPENED).addClass(s.CLOSING)},duration:this.options.duration,easing:this.options.easing,complete:function(){e.removeClass(s.CLOSING).find(n.ITEM_CONTENT_WRAPPER).attr("aria-hidden",!0),i._setHeight(),i._trigger("closed",{item:e})}})}},closeAll:function(){var t=this;this.$bellows.find("."+s.OPENED).each(function(){t.close(e(this))})},add:function(t,i){var s=e("<div />");e(t).appendTo(s),i&&this.$bellows.empty(),this._wrapContent(s),this.$bellows.append(s.children())}}),e("[data-bellows]").bellows(),e});