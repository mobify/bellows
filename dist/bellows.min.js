/*! bellows 2.0.3 2014-09-05 */
(function(t){if("function"==typeof define&&define.amd)define(["$","velocity"],t);else{var e=window.Zepto||window.jQuery;t(e,e.Velocity)}})(function(t,e){function i(t,e){this._init(t,e)}var o="bellows",n=function(){},s={ITEM:"bellows__item",HEADER:"bellows__header",OPENED:"bellows--is-open",OPENING:"bellows--is-opening",CLOSING:"bellows--is-closing"},l={ITEM_HEADER:"> .bellows__item > .bellows__header",ITEM_CONTENT_WRAPPER:"> .bellows__content-wrapper",ITEM_CONTENT:"> .bellows__item > .bellows__content"};return i.VERSION="2.0.3",i.DEFAULTS={singleItemOpen:!1,event:"click",duration:200,easing:"swing",open:n,opened:n,close:n,closed:n},i.prototype._init=function(e,o){this.options=t.extend(!0,{},i.DEFAULTS,o),this.$bellows=t(e),this._wrapContent(this.$bellows),this._bindEvents()},i.prototype._bindEvents=function(){var e=this;this.$bellows.on(this.options.event,function(i){var o=t(i.target),n=o.closest(".bellows");o.is("a")||o.parents("a").length||n[0]===e.$bellows[0]&&(o.hasClass(s.HEADER)||o.closest(".bellows__header").length)&&(i.preventDefault(),e.toggle(o.closest(".bellows__item")))})},i.prototype._getHeight=function(t){return parseFloat(e.CSS.getPropertyValue(t[0],"height"))},i.prototype._setHeight=function(t){this.$bellows.css("height",t||"")},i.prototype._item=function(t){return"number"==typeof t&&(t=this.$bellows.find("."+s.ITEM).eq(t)),t},i.prototype._wrapContent=function(t){t.find(l.ITEM_CONTENT).wrap('<div class="bellows__content-wrapper" />').parents(".bellows__item:not(.bellows--is-open)").find(l.ITEM_CONTENT_WRAPPER).attr("aria-hidden",!0)},i.prototype._trigger=function(e,i){e in this.options&&this.options[e].call(this,t.Event(o+":"+e,{bubbles:!1}),i)},i.prototype.toggle=function(t){t=this._item(t),this[t.hasClass(s.OPENED)?"close":"open"](t)},i.prototype.open=function(t){if(t=this._item(t),!t.hasClass(s.OPENED)){var i=this,o=t.find(l.ITEM_CONTENT_WRAPPER);this.options.singleItemOpen&&this.closeAll(),this._trigger("open",{item:t}),e.animate(o,"slideDown",{begin:function(){i._setHeight(i._getHeight(i.$bellows)+i._getHeight(o)),t.addClass(s.OPENING)},duration:this.options.duration,easing:this.options.easing,complete:function(){t.removeClass(s.OPENING).addClass(s.OPENED).find(l.ITEM_CONTENT_WRAPPER).removeAttr("aria-hidden"),i._setHeight(),i._trigger("opened",{item:t})}})}},i.prototype.close=function(t){if(t=this._item(t),t.hasClass(s.OPENED)){var i=this,o=t.find(l.ITEM_CONTENT_WRAPPER);this._trigger("close",{item:t}),e.animate(o,"slideUp",{begin:function(){i._setHeight(i._getHeight(i.$bellows)),t.removeClass(s.OPENED).addClass(s.CLOSING)},duration:this.options.duration,easing:this.options.easing,complete:function(){t.removeClass(s.CLOSING).find(l.ITEM_CONTENT_WRAPPER).attr("aria-hidden",!0),i._setHeight(),i._trigger("closed",{item:t})}})}},i.prototype.closeAll=function(){var e=this;this.$bellows.find("."+s.OPENED).each(function(){e.close(t(this))})},i.prototype.add=function(e,i){var o=t("<div />");t(e).appendTo(o),i&&this.$bellows.empty(),this._wrapContent(o),this.$bellows.append(o.children())},t.fn.bellows=function(e){var n=Array.prototype.slice.call(arguments);return this.each(function(){var s=t(this),l=s.data(o),a="string"==typeof e;if(!l){if(a)throw'cannot call methods on bellows prior to initialization; attempted to call method "'+e+'"';s.data(o,l=new i(this,e))}if(a){if("_"===e.charAt(0)||"function"!=typeof l[e])throw'no such method "'+e+'" for bellows';l[e].apply(l,n.length>1?n.slice(1):null)}})},t.fn.bellows.Constructor=i,t("[data-bellows]").bellows(),t});